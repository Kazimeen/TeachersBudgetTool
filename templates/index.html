{% extends "base.html" %}

{% block content %}
<div class="form-container">
    <div class="bubble-background"></div>

    <form id="animatedForm" method="POST" action="/submit">
        <div class="step active">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>
        </div>

        <div class="step">
            <label for="annual_income">Annual Income ($):</label>
            <input type="number" id="annual_income" name="annual_income" step="0.01" required>
        </div>

        <div class="step">
            <label for="current_savings">Current Savings ($):</label>
            <input type="number" id="current_savings" name="current_savings" step="0.01" required>
        </div>

        <div class="step">
            <label for="trs_contribution">TRS Contribution ($ per year):</label>
            <input type="number" id="trs_contribution" name="trs_contribution" step="0.01" required>
        </div>

        <div class="step">
            <label for="b403_contribution">403(b) Contribution ($ per year):</label>
            <input type="number" id="b403_contribution" name="b403_contribution" step="0.01" required>
        </div>

        <div class="step">
            <label for="ira_contribution">IRA Contribution ($ per year):</label>
            <input type="number" id="ira_contribution" name="ira_contribution" step="0.01" required>
        </div>

        <div class="step">
            <label for="monthly_expenses">Monthly Expenses ($):</label>
            <input type="number" id="monthly_expenses" name="monthly_expenses" step="0.01" required>
        </div>

        <div class="step">
            <label for="years_to_retire">Years to Retire:</label>
            <input type="number" id="years_to_retire" name="years_to_retire" required>
        </div>

        <div class="buttons">
            <button type="button" onclick="prevStep()" id="prevBtn" style="display:none;">Back</button>
            <button type="button" onclick="nextStep()">Next</button>
        </div>
    </form>
</div>

<!-- JavaScript for Form Steps -->
<script>
    let currentStep = 0;
    const steps = document.querySelectorAll('.step');
    const prevBtn = document.getElementById("prevBtn");

    function showStep(stepIndex) {
        steps.forEach((step, index) => {
            step.classList.remove('active');
            if (index === stepIndex) {
                step.classList.add('active');
            }
        });

        // Show or hide the "Back" button based on the step
        prevBtn.style.display = stepIndex > 0 ? "inline-block" : "none";
    }

    function nextStep() {
        if (currentStep < steps.length - 1) {
            currentStep++;
            showStep(currentStep);
        } else {
            document.getElementById("animatedForm").submit();
        }
    }

    function prevStep() {
        if (currentStep > 0) {
            currentStep--;
            showStep(currentStep);
        }
    }

    document.addEventListener("DOMContentLoaded", () => {
        showStep(currentStep);
    });
</script>
{% endblock %}
